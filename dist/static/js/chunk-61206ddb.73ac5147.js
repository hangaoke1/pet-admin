(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61206ddb"],{"365c":function(t,e,o){"use strict";o.d(e,"a",(function(){return m}));var r=o("db72"),s=o("bc3a"),i=o.n(s),a=o("5c96"),n=o("4360"),l=o("5f87"),u=i.a.create({baseURL:"http://admin.petcdd.com",withCredentials:!0,timeout:5e3});u.interceptors.request.use((function(t){return n["a"].getters.token&&(t.headers["Authorization"]=Object(l["a"])()),t}),(function(t){return Promise.reject(t)})),u.interceptors.response.use((function(t){var e=t.data;return 200!==e.code?(Object(a["Message"])({message:e.message||"Error",type:"error",duration:5e3}),900===e.code&&"/login"!==window.gvm.$route.path&&a["MessageBox"].confirm("登录状态已经过期",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){n["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){return console.log("接口异常"+t),Object(a["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)}));var c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.get(t,Object(r["a"])({params:e},o))},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.post(t,e,o)},m={get:c,post:d}},"73f5":function(t,e,o){"use strict";var r=o("365c");e["a"]={queryStore:function(t){return r["a"].get("/admin/queryStore",t)},saveOrUpdateStore:function(t){return r["a"].post("/admin/saveOrUpdateStore",t)},queryReserveWashList:function(t){return r["a"].post("/admin/queryReserveWashList",t)},finishReserveWash:function(t){return r["a"].post("/admin/finishReserveWash",t)},insertOrder:function(t){return r["a"].post("/admin/store/insertOrder",t)},queryList:function(t){return r["a"].post("/admin/store/queryList",t)}}},a896:function(t,e,o){"use strict";var r=o("ade2"),s=o.n(r);s.a},ade2:function(t,e,o){},d5ed:function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"u-userCenter"},[o("div",{staticClass:"u-header"}),t._v(" "),o("div",{staticClass:"u-body p-2"},[o("h3",[t._v("我的店铺")]),t._v(" "),o("div",{staticClass:"u-store"},[t._l(t.storeList,(function(e){return o("div",{key:e.id,staticClass:"u-store__item",on:{click:function(o){return t.setCurrentStore(e)}}},[o("img",{staticClass:"u-store__icon",attrs:{src:e.logo,alt:""}}),t._v(" "),o("div",{staticClass:"u-store__name"},[t._v(t._s(e.storeName))]),t._v(" "),0===e.storeState?o("el-tag",{staticClass:"u-store__status",attrs:{type:"success"}},[t._v("营业中")]):o("el-tag",{staticClass:"u-store__status",attrs:{type:"info"}},[t._v("休息中")])],1)})),t._v(" "),o("div",{staticClass:"u-store__item align-center justify-center",on:{click:t.doAdd}},[o("i",{staticClass:"el-icon-plus font-weight-bold"})])],2)]),t._v(" "),o("el-dialog",{attrs:{title:t.editText,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form,"label-width":"120px"}},[o("el-form-item",{directives:[{name:"loading",rawName:"v-loading",value:t.uploadLoading,expression:"uploadLoading"}],attrs:{label:"LOGO"}},[t.form.logo?o("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t._f("fmtWebp")(t.form.logo),fit:"fill",lazy:"","preview-src-list":[t.form.logo]}}):t._e(),t._v(" "),o("div",[o("el-upload",{attrs:{action:t.uploadUrl,"show-file-list":!1,"on-success":t.handleUploadSuccess,"before-upload":t.beforeUpload}},[o("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("\n              上传图片\n              "),o("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"门店名称"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.storeName,callback:function(e){t.$set(t.form,"storeName","string"===typeof e?e.trim():e)},expression:"form.storeName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"联系电话"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile","string"===typeof e?e.trim():e)},expression:"form.mobile"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"经度"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.lon,callback:function(e){t.$set(t.form,"lon","string"===typeof e?e.trim():e)},expression:"form.lon"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"纬度"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.lat,callback:function(e){t.$set(t.form,"lat","string"===typeof e?e.trim():e)},expression:"form.lat"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"工作时间"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.workTime,callback:function(e){t.$set(t.form,"workTime","string"===typeof e?e.trim():e)},expression:"form.workTime"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"营业状态"}},[o("el-radio-group",{model:{value:t.form.storeState,callback:function(e){t.$set(t.form,"storeState",e)},expression:"form.storeState"}},[o("el-radio",{attrs:{label:0}},[t._v("营业")]),t._v(" "),o("el-radio",{attrs:{label:1}},[t._v("休息")])],1)],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.doSubmitAdd}},[t._v("确 定")])],1)],1)],1)},s=[],i=o("db72"),a=o("73f5"),n={data:function(){return{storeList:[],dialogFormVisible:!1,uploadLoading:!1,form:{storeName:"",lon:"",lat:"",mobile:"",logo:"",workTime:"",storeState:0}}},computed:{editText:function(){return this.form.id?"编辑门店":"新增门店"}},created:function(){this.load()},methods:{setCurrentStore:function(t){this.$store.dispatch("store/setCurrentStore",t),this.$router.push("/")},load:function(){var t=this;a["a"].queryStore({pageNo:1,pageSize:999}).then((function(e){t.storeList=e.data})).finally((function(){}))},handleUploadSuccess:function(t,e){this.uploadLoading=!1,this.form.logo=t.data},beforeUpload:function(){return this.uploadLoading=!0,!0},doAdd:function(){this.form={id:"",storeName:"",lon:"",lat:"",mobile:"",logo:"",workTime:"",storeState:0},this.dialogFormVisible=!0},doUpdate:function(t){this.form=Object(i["a"])({},t),this.dialogFormVisible=!0},doSubmitAdd:function(){var t=this;a["a"].saveOrUpdateStore(this.form).then((function(){t.dialogFormVisible=!1,t.form.id?t.$message.success("修改成功"):t.$message("添加成功"),t.load()})).catch((function(){}))}}},l=n,u=(o("a896"),o("2877")),c=Object(u["a"])(l,r,s,!1,null,"2343239e",null);e["default"]=c.exports}}]);