(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4225acee"],{1932:function(e,t,i){},"22ce":function(e,t,i){"use strict";var a=i("365c");t["a"]={queryList:function(e){return a["a"].post("/admin/meal/queryList",e)},queryTreeList:function(e){return a["a"].post("/admin/meal/queryTreeList",e)},del:function(e){return a["a"].post("/admin/meal/del",e)},saveOrUpdate:function(e){return a["a"].post("/admin/meal/saveOrUpdate",e)},onlineList:function(e){return a["a"].get("/pet/mealList",e)},onlineSaveOrUpdate:function(e){return a["a"].post("/admin/meal/alone/saveOrUpdate",e)},onlineDelete:function(e){return a["a"].get("/admin/meal/alone/del",e)}}},"365c":function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var a=i("db72"),n=i("bc3a"),s=i.n(n),l=i("5c96"),o=i("4360"),r=i("5f87"),c=s.a.create({baseURL:"http://admin.petcdd.com",withCredentials:!0,timeout:5e3});c.interceptors.request.use((function(e){return o["a"].getters.token&&(e.headers["Authorization"]=Object(r["a"])()),e}),(function(e){return Promise.reject(e)})),c.interceptors.response.use((function(e){var t=e.data;return 200!==t.code?(Object(l["Message"])({message:t.message||"Error",type:"error",duration:5e3}),900===t.code&&"/login"!==window.gvm.$route.path&&l["MessageBox"].confirm("登录状态已经过期",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){o["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("接口异常"+e),Object(l["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)}));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c.get(e,Object(a["a"])({params:t},i))},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c.post(e,t,i)},m={get:u,post:d}},3850:function(e,t,i){},"44a8":function(e,t,i){"use strict";var a=i("8a4f"),n=i.n(a);n.a},5015:function(e,t,i){"use strict";var a=i("3850"),n=i.n(a);n.a},"6db1":function(e,t,i){"use strict";var a=i("1932"),n=i.n(a);n.a},"7a65":function(e,t,i){},"7c98":function(e,t,i){"use strict";var a=i("7a65"),n=i.n(a);n.a},"8a4f":function(e,t,i){},9466:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.uploadLoading,expression:"uploadLoading"}],attrs:{accept:"image/*",action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleUploadSuccess,"before-upload":e.handleBeforeUpload}},[e.value?i("el-image",{staticClass:"u-upload__image",style:{width:e.size+"px",height:e.size+"px"},attrs:{src:e._f("fmtWebp")(e.value),fit:"fill",lazy:"",webp:""}}):i("div",{staticClass:"u-upload__placeholder",style:{width:e.size+"px",height:e.size+"px"}},[i("i",{staticClass:"el-icon-upload"})]),e._v(" "),e.tip?i("div",{staticClass:"u-upload__tip"},[e._v(e._s(e.tip))]):e._e()],1)},n=[],s=(i("c5f6"),{name:"YcUpload",props:{value:String,tip:String,size:{type:Number,default:100}},data:function(){return{uploadLoading:!1}},methods:{handleUploadSuccess:function(e,t){this.uploadLoading=!1,this.$emit("input",e.data)},handleBeforeUpload:function(){return this.uploadLoading=!1,!0}}}),l=s,o=(i("5015"),i("2877")),r=Object(o["a"])(l,a,n,!1,null,"5395658e",null);t["a"]=r.exports},ba91:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"yc-tabs"},e._l(e.options,(function(t){return i("li",{key:t.value,staticClass:"yc-tabs__item",class:{active:t.value===e.value},on:{click:function(i){return e.handleClick(t)}}},[i("span",[e._v(e._s(t.label))])])})),0)},n=[],s=(i("c5f6"),{props:{value:[String,Number],options:Array},methods:{handleClick:function(e){this.$emit("input",e.value),this.$emit("change",e)}}}),l=s,o=(i("cb57"),i("2877")),r=Object(o["a"])(l,a,n,!1,null,null,null);t["a"]=r.exports},c592:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-input",{attrs:{size:e.size,value:e.value,placeholder:e.placeholder},on:{input:e.handleInput,blur:e.handleBlur}},[i("template",{slot:"append"},[e._t("append")],2)],2)},n=[],s=(i("a481"),i("c5f6"),{name:"GNumber",props:{value:{type:[String,Number],default:""},placeholder:{type:String,default:"请输入"},size:{type:String,default:""}},methods:{handleBlur:function(e){var t=e.target.value;0==t||""==t?this.$emit("input",""):this.$emit("input",Number(t))},handleInput:function(e){if(e=this.filterNumber(e),this.isInteger&&"."===event.data)e+="1",event.target.value=e,event.target.value=e=e.substr(0,e.length-1);else{if(e.length>this.maxLength)return void(event.target.value=e.substr(0,this.maxLength));event.target.value=e}this.$emit("input",e)},filterNumber:function(e){var t=e.length,i=e.substring(0,1),a=e.substring(1,2);e=e.replace(/[^\d.]+/g,""),t>1&&"0"===i&&"."!==a&&(e=e.substring(1)),"."===i&&(e="");var n=e.indexOf(".");if(-1!==n){var s=e.substring(n+1),l=s.indexOf(".");-1!==l&&(e=e.substring(0,n+l+1)+e.substring(n+l+2))}return e}}}),l=s,o=i("2877"),r=Object(o["a"])(l,a,n,!1,null,"11b2804a",null);t["a"]=r.exports},c934:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"yc-block"},[e._t("default")],2)},n=[],s={name:"YcBlock"},l=s,o=(i("7c98"),i("2877")),r=Object(o["a"])(l,a,n,!1,null,"359d4f1a",null);t["a"]=r.exports},cb57:function(e,t,i){"use strict";var a=i("ce3f"),n=i.n(a);n.a},ce3f:function(e,t,i){},fb0c:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"p-2"},[i("yc-tabs",{attrs:{options:["线下服务","线上服务"].map((function(e){return{label:e,value:e}}))},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}}),e._v(" "),i("yc-block",["线下服务"===e.current?i("offline-service"):e._e(),e._v(" "),"线上服务"===e.current?i("online-service"):e._e()],1)],1)},n=[],s=i("ba91"),l=i("c934"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bg-bai p-2"},[i("h1",{staticClass:"u-title mb-5"},[e._v("服务价目表")]),e._v(" "),i("div",{staticClass:"u-table"},[e._m(0),e._v(" "),e._l(e.list,(function(t){return i("div",{key:t.name,staticClass:"u-table__row"},[i("div",{staticClass:"row-left"},[i("img",{staticClass:"mr-1",staticStyle:{widht:"24px",height:"24px"},attrs:{src:t.icon}}),e._v(" "),i("span",[e._v(e._s(t.name))])]),e._v(" "),i("div",{staticClass:"row-right"},[e._l(t.children,(function(t){return i("div",{key:t.id,staticClass:"row-item"},[i("div",{staticClass:"content-left"},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"content-right"},[i("el-button",{attrs:{type:"primary",round:""},on:{click:function(i){return e.editMeal(t)}}},[e._v("价目表")]),e._v(" "),i("el-button",{attrs:{round:""}},[e._v("删除")])],1)])})),e._v(" "),i("div",{staticClass:"row-item u-add"},[i("div",{staticClass:"u-add__line"}),e._v(" "),i("div",{staticClass:"u-add__btn",on:{click:function(i){return e.addMeal(t.name)}}},[i("i",{staticClass:"el-icon-circle-plus"}),e._v(" "),i("span",[e._v("添加")])]),e._v(" "),i("div",{staticClass:"u-add__line"})])],2)])}))],2),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible,width:"880px",top:"100px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",[i("div",{staticClass:"flex align-center justify-center border-bottom-divider pb-2"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.editMealForm.name,expression:"editMealForm.name"}],staticClass:"u-mealname",attrs:{placeholder:"请输入名称"},domProps:{value:e.editMealForm.name},on:{input:function(t){t.target.composing||e.$set(e.editMealForm,"name",t.target.value)}}}),e._v(" "),i("span",{staticClass:"u-mealtip"},[e._v("价目表")])]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.editMealForm.mealItemsList}},[i("el-table-column",{attrs:{prop:"name",label:"名称",align:"center",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{staticClass:"u-bold",attrs:{size:"small",placeholder:"例如小型犬、中型犬、大型犬"},model:{value:t.row.name,callback:function(i){e.$set(t.row,"name",i)},expression:"scope.row.name"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"originalPrice",label:"原价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"flex align-center justify-center p-1"},[i("g-number",{staticClass:"u-bold",attrs:{size:"small"},model:{value:t.row.originalPrice,callback:function(i){e.$set(t.row,"originalPrice",i)},expression:"scope.row.originalPrice"}}),e._v(" "),i("span",{staticClass:"ml-1"},[e._v("元")])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"memberPrice",label:"会员价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"flex align-center justify-center p-1"},[i("g-number",{staticClass:"u-bold",attrs:{size:"small"},model:{value:t.row.memberPrice,callback:function(i){e.$set(t.row,"memberPrice",i)},expression:"scope.row.memberPrice"}}),e._v(" "),i("span",{staticClass:"ml-1"},[e._v("元")])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"action",label:"操作",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(i){return e.delMealItems(t.$index)}}})]}}])})],1),e._v(" "),i("div",{staticClass:"u-add",on:{click:e.addMealItems}},[i("div",{staticClass:"u-add__line"}),e._v(" "),i("div",{staticClass:"u-add__btn"},[i("i",{staticClass:"el-icon-circle-plus"}),e._v(" "),i("span",[e._v("添加收费区间")])]),e._v(" "),i("div",{staticClass:"u-add__line"})])],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.saveOrUpdate}},[e._v("确 定")])],1)])],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"u-table__header"},[i("div",{staticClass:"title-1"},[e._v("服务类型")]),e._v(" "),i("div",{staticClass:"title-2"},[e._v("服务内容")]),e._v(" "),i("div",{staticClass:"title-3"},[e._v("价格明细")])])}],c=(i("ac6a"),i("7f7f"),i("2ef0")),u=i.n(c),d=i("22ce"),m=i("c592"),f={name:"OfflineService",components:{GNumber:m["a"]},data:function(){return{dialogVisible:!1,editMealForm:{id:"",name:"",category:"",discountType:0,mealItemsList:[]},list:[{name:"洗澡",icon:"http://mall.gohipet.com/img/icon-shower.6c441e90.png",children:[]},{name:"美容",icon:"http://mall.gohipet.com/img/icon-hairdressing.9f74ab6f.png",children:[]},{name:"寄养",icon:"http://mall.gohipet.com/img/icon-foster.8e6b170f.png",children:[]},{name:"单项",icon:"http://mall.gohipet.com/img/icon-itemService.7d09442a.png",children:[]},{name:"其他",icon:"http://mall.gohipet.com/img/icon-else.6e63dc20.png",children:[]}]}},mounted:function(){this.getList()},methods:{saveOrUpdate:function(){var e=this,t=this.editMealForm;if(!t.name)return this.$message.warning("请输入价目表名称！");for(var i=0;i<t.mealItemsList.length;i++){var a=t.mealItemsList[i];if(!a.name)return this.$message.warning("请输入类目名称！");if(!a.originalPrice)return this.$message.warning("请输入原价！")}d["a"].saveOrUpdate({mealInfo:{id:t.id,name:t.name,category:t.category,discountType:t.discountType},mealItemList:t.mealItemsList}).then((function(){e.$message.success("操作成功"),e.dialogVisible=!1,e.getList()}))},addMeal:function(e){this.editMealForm={id:"",name:"",category:e,discountType:0,mealItemsList:[]},this.dialogVisible=!0},editMeal:function(e){this.editMealForm={id:e.id,name:e.name,category:e.category,discountType:e.discountType,mealItemsList:u.a.cloneDeep(e.mealItemsList)||[]},this.dialogVisible=!0},addMealItems:function(){this.editMealForm.mealItemsList.push({name:"",originalPrice:"",memberPrice:""})},delMealItems:function(e){this.editMealForm.mealItemsList.splice(e,1)},getList:function(){var e=this;d["a"].queryTreeList({pageSize:999,pageNo:1}).then((function(t){var i=u.a.get(t.data,"items",[]);e.list.forEach((function(e){return e.children=[]})),i.forEach((function(t){var i={"洗澡":0,"美容":1,"寄养":2,"单项":3,"其他":4};e.list[i[t.category]].children.push(t)}))}))}}},p=f,v=(i("6db1"),i("2877")),g=Object(v["a"])(p,o,r,!1,null,"29da9884",null),h=g.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"p-2"},[i("div",{staticClass:"u-offsv"},[e._l(e.list,(function(t){return i("div",{key:t.id,staticClass:"u-offsv__item"},[i("el-image",{staticClass:"u-offsv__logo",attrs:{src:t.image,fit:"cover",lazy:"",webp:""}}),e._v(" "),i("div",{staticClass:"u-offsv__name"},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"u-offsv__price"},[i("span",{staticClass:"font-s-12"},[e._v("¥")]),e._v(" "),i("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.price.toFixed(2)))])]),e._v(" "),i("div",{staticClass:"u-offsv__mask"},[i("i",{staticClass:"el-icon-edit-outline",on:{click:function(i){return i.stopPropagation(),e.doUpdate(t)}}}),e._v(" "),i("i",{staticClass:"el-icon-delete",on:{click:function(i){return i.stopPropagation(),e.doDelete(t)}}})])],1)})),e._v(" "),i("div",{staticClass:"u-offsv__item align-center justify-center",on:{click:e.doAdd}},[i("i",{staticClass:"el-icon-plus font-weight-bold"})])],2),e._v(" "),i("el-dialog",{attrs:{width:"800px",title:e.editText,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.form,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"服务图片"}},[i("yc-upload",{attrs:{tip:"提示：建议尺寸400x400"},model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"服务名称"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"价格"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price","string"===typeof t?t.trim():t)},expression:"form.price"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description","string"===typeof t?t.trim():t)},expression:"form.description"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")])],1)],1)],1)},b=[],y=i("db72"),C=i("9466"),w={name:"OnlineService",components:{YcUpload:C["a"]},data:function(){return{dialogFormVisible:!1,uploadLoading:!1,list:[],form:{}}},computed:{editText:function(){return this.form.id?"编辑服务":"新增服务"}},mounted:function(){this.load()},methods:{doAdd:function(){this.form={},this.dialogFormVisible=!0},doUpdate:function(e){this.form=Object(y["a"])({},e),this.dialogFormVisible=!0},doDelete:function(e){var t=this;this.$confirm("此操作将删除该线上服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){d["a"].onlineDelete({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.load()}))})).catch((function(){}))},handleConfirm:function(){var e=this;d["a"].onlineSaveOrUpdate(this.form).then((function(t){e.dialogFormVisible=!1,e.$notify({title:"提示",message:"添加成功",type:"success"}),e.load()}))},load:function(){var e=this;d["a"].onlineList({pageNo:1,pageSize:999}).then((function(t){e.list=t.data}))}}},x=w,k=(i("44a8"),Object(v["a"])(x,_,b,!1,null,"382a087a",null)),L=k.exports,$={name:"Product",components:{YcTabs:s["a"],YcBlock:l["a"],OfflineService:h,OnlineService:L},data:function(){return{current:"线下服务"}}},O=$,S=Object(v["a"])(O,a,n,!1,null,null,null);t["default"]=S.exports}}]);