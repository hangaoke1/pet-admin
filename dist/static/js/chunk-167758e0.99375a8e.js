(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-167758e0"],{"22ce":function(t,e,i){"use strict";var a=i("365c");e["a"]={queryList:function(t){return a["a"].post("/admin/meal/queryList",t)},queryTreeList:function(t){return a["a"].post("/admin/meal/queryTreeList",t)},del:function(t){return a["a"].get("/admin/meal/del",t)},saveOrUpdate:function(t){return a["a"].post("/admin/meal/saveOrUpdate",t)},onlineList:function(t){return a["a"].get("/pet/mealList",t)},onlineSaveOrUpdate:function(t){return a["a"].post("/admin/meal/alone/saveOrUpdate",t)},onlineDelete:function(t){return a["a"].get("/admin/meal/alone/del",t)}}},3850:function(t,e,i){},4818:function(t,e,i){},5015:function(t,e,i){"use strict";var a=i("3850"),n=i.n(a);n.a},9466:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploadLoading,expression:"uploadLoading"}],attrs:{accept:"image/*",action:t.uploadUrl,"show-file-list":!1,"on-success":t.handleUploadSuccess,"before-upload":t.handleBeforeUpload}},[t.value?i("el-image",{staticClass:"u-upload__image",style:{width:t.size+"px",height:t.size+"px"},attrs:{src:t._f("fmtWebp")(t.value),fit:"fill",lazy:"",webp:""}}):i("div",{staticClass:"u-upload__placeholder",style:{width:t.size+"px",height:t.size+"px"}},[i("i",{staticClass:"el-icon-upload"})]),t._v(" "),t.tip?i("div",{staticClass:"u-upload__tip"},[t._v(t._s(t.tip))]):t._e()],1)},n=[],s=(i("c5f6"),{name:"YcUpload",props:{value:String,tip:String,size:{type:Number,default:100}},data:function(){return{uploadLoading:!1}},methods:{handleUploadSuccess:function(t,e){this.uploadLoading=!1,this.$emit("input",t.data)},handleBeforeUpload:function(){return this.uploadLoading=!1,!0}}}),l=s,o=(i("5015"),i("2877")),c=Object(o["a"])(l,a,n,!1,null,"5395658e",null);e["a"]=c.exports},a373:function(t,e,i){"use strict";var a=i("ff11"),n=i.n(a);n.a},b681:function(t,e,i){"use strict";var a=i("4818"),n=i.n(a);n.a},fb0c:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p-2"},[i("yc-tabs",{attrs:{options:["线下服务","线上服务"].map((function(t){return{label:t,value:t}}))},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}}),t._v(" "),i("yc-block",["线下服务"===t.current?i("offline-service"):t._e(),t._v(" "),"线上服务"===t.current?i("online-service"):t._e()],1)],1)},n=[],s=i("ba91"),l=i("c934"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-bai p-2"},[i("h1",{staticClass:"u-title mb-5"},[t._v("服务价目表")]),t._v(" "),i("div",{staticClass:"u-table"},[t._m(0),t._v(" "),t._l(t.list,(function(e){return i("div",{key:e.name,staticClass:"u-table__row"},[i("div",{staticClass:"row-left"},[i("img",{staticClass:"mr-1",staticStyle:{widht:"24px",height:"24px"},attrs:{src:e.icon}}),t._v(" "),i("span",[t._v(t._s(e.name))])]),t._v(" "),i("div",{staticClass:"row-right"},[t._l(e.children,(function(e){return i("div",{key:e.id,staticClass:"row-item"},[i("div",{staticClass:"content-left"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"content-right"},[i("el-button",{staticClass:"yc-edit",on:{click:function(i){return t.editMeal(e)}}},[t._v("价目表")]),t._v(" "),i("el-button",{staticClass:"yc-del",on:{click:function(i){return t.delMeal(e)}}},[t._v("删除")])],1)])})),t._v(" "),i("div",{staticClass:"row-item u-add"},[i("div",{staticClass:"u-add__line"}),t._v(" "),i("div",{staticClass:"u-add__btn",on:{click:function(i){return t.addMeal(e.name)}}},[i("i",{staticClass:"el-icon-circle-plus"}),t._v(" "),i("span",[t._v("添加")])]),t._v(" "),i("div",{staticClass:"u-add__line"})])],2)])}))],2),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,width:"880px",top:"100px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",[i("div",{staticClass:"flex align-center justify-center border-bottom-divider pb-2"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.editMealForm.name,expression:"editMealForm.name"}],staticClass:"u-mealname",attrs:{placeholder:"请输入名称"},domProps:{value:t.editMealForm.name},on:{input:function(e){e.target.composing||t.$set(t.editMealForm,"name",e.target.value)}}}),t._v(" "),i("span",{staticClass:"u-mealtip"},[t._v("价目表")])]),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.editMealForm.mealItemsList}},[i("el-table-column",{attrs:{prop:"name",label:"名称",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{staticClass:"u-bold",attrs:{size:"small",placeholder:"例如小型犬、中型犬、大型犬"},model:{value:e.row.name,callback:function(i){t.$set(e.row,"name",i)},expression:"scope.row.name"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"originalPrice",label:"原价",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"flex align-center justify-center p-1"},[i("g-number",{staticClass:"f-number",attrs:{size:"small"},model:{value:e.row.originalPrice,callback:function(i){t.$set(e.row,"originalPrice",i)},expression:"scope.row.originalPrice"}}),t._v(" "),i("span",{staticClass:"ml-1"},[t._v("元")])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"memberPrice",label:"会员价",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"flex align-center justify-center p-1"},[i("g-number",{staticClass:"f-number",attrs:{size:"small"},model:{value:e.row.memberPrice,callback:function(i){t.$set(e.row,"memberPrice",i)},expression:"scope.row.memberPrice"}}),t._v(" "),i("span",{staticClass:"ml-1"},[t._v("元")])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"action",label:"操作",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(i){return t.delMealItems(e.$index)}}})]}}])})],1),t._v(" "),i("div",{staticClass:"u-add",on:{click:t.addMealItems}},[i("div",{staticClass:"u-add__line"}),t._v(" "),i("div",{staticClass:"u-add__btn"},[i("i",{staticClass:"el-icon-circle-plus"}),t._v(" "),i("span",[t._v("添加收费区间")])]),t._v(" "),i("div",{staticClass:"u-add__line"})])],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"yc-del",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{staticClass:"yc-btn",on:{click:t.saveOrUpdate}},[t._v("确 定")])],1)])],1)},c=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"u-table__header"},[i("div",{staticClass:"title-1"},[t._v("服务类型")]),t._v(" "),i("div",{staticClass:"title-2"},[t._v("服务内容")]),t._v(" "),i("div",{staticClass:"title-3"},[t._v("价格明细")])])}],r=(i("ac6a"),i("7f7f"),i("2ef0")),u=i.n(r),d=i("22ce"),m=i("c592"),f={name:"OfflineService",components:{GNumber:m["a"]},data:function(){return{dialogVisible:!1,editMealForm:{id:"",name:"",category:"",discountType:0,mealItemsList:[]},list:[{name:"洗澡",icon:"http://mall.gohipet.com/img/icon-shower.6c441e90.png",children:[]},{name:"美容",icon:"http://mall.gohipet.com/img/icon-hairdressing.9f74ab6f.png",children:[]},{name:"寄养",icon:"http://mall.gohipet.com/img/icon-foster.8e6b170f.png",children:[]},{name:"单项",icon:"http://mall.gohipet.com/img/icon-itemService.7d09442a.png",children:[]},{name:"其他",icon:"http://mall.gohipet.com/img/icon-else.6e63dc20.png",children:[]}]}},mounted:function(){this.getList()},methods:{saveOrUpdate:function(){var t=this,e=this.editMealForm;if(!e.name)return this.$message.warning("请输入价目表名称！");for(var i=0;i<e.mealItemsList.length;i++){var a=e.mealItemsList[i];if(!a.name)return this.$message.warning("请输入类目名称！");if(!a.originalPrice)return this.$message.warning("请输入原价！")}d["a"].saveOrUpdate({mealInfo:{id:e.id,name:e.name,category:e.category,discountType:e.discountType},mealItemList:e.mealItemsList}).then((function(){t.$notify({title:"成功",message:"操作成功",type:"success"}),t.dialogVisible=!1,t.getList()}))},addMeal:function(t){this.editMealForm={id:"",name:"",category:t,discountType:0,mealItemsList:[]},this.dialogVisible=!0},editMeal:function(t){this.editMealForm={id:t.id,name:t.name,category:t.category,discountType:t.discountType,mealItemsList:u.a.cloneDeep(t.mealItemsList)||[]},this.dialogVisible=!0},delMeal:function(t){var e=this;this.$confirm("确认删除改套餐？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){d["a"].del({id:t.id}).then((function(t){e.getList(),e.$notify({title:"成功",message:"操作成功",type:"success"})}))})).catch((function(){}))},addMealItems:function(){this.editMealForm.mealItemsList.push({name:"",originalPrice:"",memberPrice:""})},delMealItems:function(t){this.editMealForm.mealItemsList.splice(t,1)},getList:function(){var t=this;d["a"].queryTreeList({pageSize:999,pageNo:1}).then((function(e){var i=u.a.get(e.data,"items",[]);t.list.forEach((function(t){return t.children=[]})),i.forEach((function(e){var i={"洗澡":0,"美容":1,"寄养":2,"单项":3,"其他":4};t.list[i[e.category]].children.push(e)}))}))}}},p=f,v=(i("b681"),i("2877")),_=Object(v["a"])(p,o,c,!1,null,"14ea90dc",null),g=_.exports,h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p-2"},[i("div",{staticClass:"u-offsv"},[t._l(t.list,(function(e){return i("div",{key:e.id,staticClass:"u-offsv__item"},[i("el-image",{staticClass:"u-offsv__logo",attrs:{src:e.image,fit:"fill",lazy:"",webp:""}}),t._v(" "),i("div",{staticClass:"u-offsv__name"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"u-offsv__price"},[i("span",{staticClass:"font-s-12"},[t._v("¥")]),t._v(" "),i("span",{staticClass:"font-weight-bold f-number"},[t._v(t._s(t._f("numFixed2")(e.price)))])]),t._v(" "),i("div",{staticClass:"u-offsv__mask"},[i("i",{staticClass:"el-icon-edit-outline",on:{click:function(i){return i.stopPropagation(),t.doUpdate(e)}}}),t._v(" "),i("i",{staticClass:"el-icon-delete",on:{click:function(i){return i.stopPropagation(),t.doDelete(e)}}})])],1)})),t._v(" "),i("div",{staticClass:"u-offsv__item align-center justify-center",on:{click:t.doAdd}},[i("i",{staticClass:"el-icon-plus font-weight-bold"})])],2),t._v(" "),i("el-dialog",{attrs:{width:"800px",title:t.editText,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{attrs:{model:t.form,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"服务图片"}},[i("yc-upload",{attrs:{tip:"提示：建议尺寸400x400"},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"服务名称"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"价格"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price","string"===typeof e?e.trim():e)},expression:"form.price"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description","string"===typeof e?e.trim():e)},expression:"form.description"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v("确 定")])],1)],1)],1)},b=[],C=i("db72"),y=i("9466"),w={name:"OnlineService",components:{YcUpload:y["a"]},data:function(){return{dialogFormVisible:!1,uploadLoading:!1,list:[],form:{}}},computed:{editText:function(){return this.form.id?"编辑服务":"新增服务"}},mounted:function(){this.load()},methods:{doAdd:function(){this.form={},this.dialogFormVisible=!0},doUpdate:function(t){this.form=Object(C["a"])({},t),this.dialogFormVisible=!0},doDelete:function(t){var e=this;this.$confirm("此操作将删除该线上服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){d["a"].onlineDelete({id:t.id}).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.load()}))})).catch((function(){}))},handleConfirm:function(){var t=this;d["a"].onlineSaveOrUpdate(this.form).then((function(e){t.dialogFormVisible=!1,t.$notify({title:"提示",message:"操作成功",type:"success"}),t.load()}))},load:function(){var t=this;d["a"].onlineList({pageNo:1,pageSize:999}).then((function(e){t.list=e.data}))}}},x=w,k=(i("a373"),Object(v["a"])(x,h,b,!1,null,"f42ce222",null)),L=k.exports,$={name:"Product",components:{YcTabs:s["a"],YcBlock:l["a"],OfflineService:g,OnlineService:L},data:function(){return{current:"线下服务"}}},M=$,F=Object(v["a"])(M,a,n,!1,null,null,null);e["default"]=F.exports},ff11:function(t,e,i){}}]);