(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2169f0"],{c2f1:function(t,e,n){"use strict";n.r(e);var i,o,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"u-setting p-2"},[n("div",{staticClass:"bg-bai p-2"},[n("h1",{staticClass:"font-s-2"},[t._v("打印设置")]),t._v(" "),n("div",{staticClass:"flex align-center"},[n("div",{staticClass:"font-s-14 text-hui"},[t._v("小票机机型:")]),t._v(" "),n("el-select",{staticClass:"mx-1",attrs:{size:"mini",placeholder:"请选择"},model:{value:t.printIndex,callback:function(e){t.printIndex=e},expression:"printIndex"}},t._l(t.printList,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.doTest}},[t._v("打印测试")])],1)])])},d=[],a=n("8ded"),l=n.n(a),s=(n("4917"),n("2b0e")),c=new s["default"];function f(){c.$confirm("当前设备未安装打印控件，无法打印，是否开始安装?","提示",{confirmButtonText:"立即安装",cancelButtonText:"取消",type:"warning"}).then((function(){window.open("http://mall.gohipet.com/download/CLodop_Setup_for_Win32NT.exe")})).catch((function(){}))}function m(){try{var t=navigator.userAgent;if(t.match(/Windows\sPhone/i))return!0;if(t.match(/iPhone|iPod|iPad/i))return!0;if(t.match(/Android/i))return!0;if(t.match(/Edge\D?\d+/i))return!0;var e=t.match(/Trident\D?\d+/i),n=t.match(/MSIE\D?\d+/i),i=t.match(/OPR\D?\d+/i),o=t.match(/Firefox\D?\d+/i),r=t.match(/x64/i);if(!e&&!n&&r)return!0;if(o){if(o=o[0].match(/\d+/),o[0]>=41||r)return!0}else if(i){if(i=i[0].match(/\d+/),i[0]>=32)return!0}else if(!e&&!n){var d=t.match(/Chrome\D?\d+/i);if(d&&(d=d[0].match(/\d+/),d[0]>=41))return!0}return!1}catch(a){return!0}}function p(){if("loading"!=o&&"complete"!=o){o="loading";var t=document.head||document.getElementsByTagName("head")[0]||document.documentElement,e=document.createElement("script"),n=document.createElement("script");e.src="http://localhost:8000/CLodopfuncs.js?priority=1",n.src="http://localhost:18000/CLodopfuncs.js",e.onload=n.onload=function(){o="complete"},e.onerror=n.onerror=function(t){o="complete"},t.insertBefore(e,t.firstChild),t.insertBefore(n,t.firstChild),!!(e.src+n.src).match(/\/\/localho|\/\/127.0.0./i)}}function u(t,e){var n,r="<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='install_lodop32.exe' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",d="<br><font color='#FF00FF'>打印控件需要升级!点击这里<a href='install_lodop32.exe' target='_self'>执行升级</a>,升级后请重新进入。</font>",a="<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='install_lodop64.exe' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",l="<br><font color='#FF00FF'>打印控件需要升级!点击这里<a href='install_lodop64.exe' target='_self'>执行升级</a>,升级后请重新进入。</font>",s="<br><br><font color='#FF00FF'>（注意：如曾安装过Lodop旧版附件npActiveXPLugin,请在【工具】->【附加组件】->【扩展】中先卸它）</font>",c="<br><br><font color='#FF00FF'>(如果此前正常，仅因浏览器升级或重安装而出问题，需重新执行以上安装）</font>",p="<br><font color='#FF00FF'>Web打印服务CLodop需升级!点击这里<a href='CLodop_Setup_for_Win32NT.exe' target='_self'>执行升级</a>,升级后请刷新页面。</font>";try{var u=navigator.userAgent,h=!!u.match(/MSIE/i)||!!u.match(/Trident/i);if(m()){try{n=getCLodop()}catch(g){}if(!n&&"complete"!==o)return void("loading"==o?alert("网页还没下载完毕，请稍等一下再操作."):alert("没有加载CLodop的主js，请先调用loadCLodop过程."));if(!n)return void f();CLODOP.CVERSION<"4.1.0.4"&&(document.body.innerHTML=p+document.body.innerHTML),e&&e.parentNode&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t)}else{var v=h&&!!u.match(/x64/i);if(t||e?n=h?t:e:i?n=i:(n=document.createElement("object"),n.setAttribute("width",0),n.setAttribute("height",0),n.setAttribute("style","position:absolute;left:0px;top:-100px;width:0px;height:0px;"),h?n.setAttribute("classid","clsid:2105C259-1E0C-4534-8141-A753534CB4CA"):n.setAttribute("type","application/x-print-lodop"),document.documentElement.appendChild(n),i=n),!n||!n.VERSION)return u.indexOf("Chrome")>=0&&(document.body.innerHTML=c+document.body.innerHTML),u.indexOf("Firefox")>=0&&(document.body.innerHTML=s+document.body.innerHTML),document.body.innerHTML=(v?a:r)+document.body.innerHTML,n}return n.VERSION<"6.2.2.6"&&(m()||(document.body.innerHTML=(v?l:d)+document.body.innerHTML)),n}catch(g){alert("getLodop出错:"+g)}}m()&&p();var h={name:"Print",data:function(){return{printIndex:l.a.get("PRINT_INDEX"),printList:[]}},watch:{printIndex:function(t){l.a.set("PRINT_INDEX",t),this.setPrint(t)}},mounted:function(){var t=this;setTimeout((function(){t.getLodop(),t.getPrintConfig()}),1e3)},methods:{doTest:function(){if(this.lodop)if(this.printIndex){var t=u();t.SET_PRINT_STYLE("FontSize",8),t.ADD_PRINT_HTM(0,0,"100%","100%",'\n        <div>\n          <h1  style="font-size: 16pt;text-align: center">小黄兜宠物店</h1>\n          <div style="margin-bottom: 2mm;font-size: 10pt;">订单号：1000000020391</div>\n          <div style="font-size: 10pt;">收银员：小黄兜宠物生活馆</div>\n          <div style="padding: 2mm 0;font-size: 10pt;">= = = = = = = = = = = = = = = = = = = = = = =</div>\n\n          <div style="display: flex">\n            <div style="width: 30mm;font-size: 10pt;">商品名称</div>\n            <div style="width: 21mm;text-align:center;font-size: 10pt;">数量</div>\n            <div style="width: 21mm;text-align:center;font-size: 10pt;">单价</div>\n          </div>\n\n          <div style="display: flex;margin-top: 2mm;">\n            <div style="width: 30mm;font-size: 10pt;">渴望猫粮15kg鳕鱼味</div>\n            <div style="width: 21mm;text-align:center;font-size: 10pt;">1</div>\n            <div style="width: 21mm;text-align:center;font-size: 10pt;">490.00</div>\n          </div>\n          <div style="display: flex;margin-top: 2mm;">\n            <div style="width: 30mm;font-size: 10pt;">渴望猫粮15kg鳕鱼味</div>\n            <div style="width: 21mm;text-align:center;font-size: 10pt;">1</div>\n            <div style="width: 21mm;text-align:center;font-size: 10pt;">490.00</div>\n          </div>\n          <div style="display: flex;margin-top: 2mm;">\n            <div style="width: 30mm;font-size: 10pt;">渴望猫粮15kg鳕鱼味</div>\n            <div style="width: 21mm;text-align:center;font-size: 10pt;">1</div>\n            <div style="width: 21mm;text-align:center;font-size: 10pt;">490.00</div>\n          </div>\n        </div>\n      '),t.PREVIEW()}else this.$message.warning("请选择打印机");else f()},getLodop:function(){this.lodop=u()},setPrint:function(t){this.lodop.SET_PRINTER_INDEX(t)},getPrintConfig:function(){if(this.lodop){for(var t=[],e=this.lodop.GET_PRINTER_COUNT(),n=0;n<e;n++)t.push({label:this.lodop.GET_PRINTER_NAME(n),value:n});this.printList=t}}}},v=h,g=n("2877"),y=Object(g["a"])(v,r,d,!1,null,"e0b09078",null);e["default"]=y.exports}}]);