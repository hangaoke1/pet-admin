(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56802e7e"],{"414c":function(t,e,a){},a29e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-2"},[a("div",{staticClass:"p-2 bg-bai"},[a("div",{staticClass:"u-card"},[a("div",{staticClass:"font-s-16 mb-1"},[t._v("优惠券")]),t._v(" "),a("div",{staticClass:"font-s-12 mb-1"},[t._v("例：满300元减30元")]),t._v(" "),a("div",{staticClass:"flex justify-end"},[a("div",{staticClass:"u-card__btn",on:{click:t.showCreate}},[a("span",[t._v("创建")]),t._v(" "),a("span",{staticClass:"el-icon-plus font-weight-bold font-s-1"})])])])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{size:"small",data:t.list,"empty-text":"暂无优惠券","row-key":"id"}},[a("el-table-column",{attrs:{prop:"name",label:"优惠券名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"优惠券内容",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("满"+t._s(e.row.required)+"减"+t._s(e.row.value))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"是否有效",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.indate?a("el-tag",{attrs:{type:"success",size:"small"}},[t._v("有效")]):a("el-tag",{attrs:{type:"info",size:"small"}},[t._v("失效")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"操作",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"yc-edit",attrs:{size:"small"},on:{click:t.showGiven}},[t._v("发放")]),t._v(" "),a("el-button",{staticClass:"yc-del",attrs:{size:"small"},on:{click:function(a){return t.showEdit(e.row)}}},[t._v("修改")])]}}])})],1),t._v(" "),a("div",{staticClass:"u-page"},[a("el-pagination",{attrs:{background:"","current-page":t.pageNo,"page-sizes":[10,20,30,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.editText,visible:t.showForm},on:{"update:visible":function(e){t.showForm=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"卡券名称：","label-width":t.formLabelWidth}},[a("el-input",{attrs:{size:"small",autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"卡券内容：","label-width":t.formLabelWidth}},[a("div",[a("span",{staticClass:"mr-1"},[t._v("满")]),t._v(" "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"small",autocomplete:"off"},model:{value:t.form.required,callback:function(e){t.$set(t.form,"required","string"===typeof e?e.trim():e)},expression:"form.required"}}),t._v(" "),a("span",{staticClass:"mx-1"},[t._v("减")]),t._v(" "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"small",autocomplete:"off"},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value","string"===typeof e?e.trim():e)},expression:"form.value"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"是否有效：","label-width":t.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","active-value":"0","inactive-value":"1"},model:{value:t.form.indate,callback:function(e){t.$set(t.form,"indate",e)},expression:"form.indate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注：","label-width":t.formLabelWidth}},[a("el-input",{attrs:{size:"small",autocomplete:"off"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark","string"===typeof e?e.trim():e)},expression:"form.remark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showForm=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmCreate}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"show-close":!1,visible:t.showGivenForm,width:"700px"},on:{"update:visible":function(e){t.showGivenForm=e}}},[a("div",{staticClass:"text-center",attrs:{slot:"title"},slot:"title"},[t._v("发放")]),t._v(" "),a("el-form",{attrs:{model:t.givenForm}},[a("el-form-item",{attrs:{label:"有效日期：","label-width":t.formLabelWidth}},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"daterange",size:"small","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.givenForm.dateRange,callback:function(e){t.$set(t.givenForm,"dateRange",e)},expression:"givenForm.dateRange"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"发放对象：","label-width":t.formLabelWidth}},[a("el-radio-group",{model:{value:t.givenForm.sendType,callback:function(e){t.$set(t.givenForm,"sendType",e)},expression:"givenForm.sendType"}},[a("el-radio",{attrs:{label:0}},[t._v("全部用户")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("指定用户")])],1)],1),t._v(" "),1===t.givenForm.sendType?a("el-form-item",{attrs:{label:"指定用户：","label-width":t.formLabelWidth}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:[],size:"mini"}},[a("el-table-column",{attrs:{prop:"date",label:"用户名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"用户等级",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"yc-edit",attrs:{size:"mini"}},[t._v("删除")])]}}],null,!1,2308499408)})],1),t._v(" "),a("div",{staticClass:"p-1 flex align-center justify-center"},[a("el-button",{staticClass:"yc-btn",attrs:{size:"small"}},[t._v("添加用户")])],1)],1):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showGivenForm=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showGivenForm=!1}}},[t._v("确 定")])],1)],1)],1)},o=[],l=a("db72"),i=a("365c"),n={queryList:function(t){return i["a"].post("/admin/coupons/queryList",t)},saveOrUpdate:function(t){return i["a"].post("/admin/coupon/saveOrUpdate",t)},give:function(t){return i["a"].post("/admin/coupons/give",t)}},r={name:"Coupons",data:function(){return{list:[],pageNo:1,pageSize:10,totalCount:0,form:{},showForm:!1,formLabelWidth:"100px",showGivenForm:!1,givenForm:{sendType:0,couponsId:"",date:null,userList:[]}}},computed:{editText:function(){return this.form.id?"编辑优惠券":"新增优惠券"}},mounted:function(){this.getList()},methods:{showGiven:function(){this.showGivenForm=!0},showCreate:function(){this.form={name:"",required:"",remark:"",indate:0,value:""},this.showForm=!0},showEdit:function(t){this.form=Object(l["a"])({},t),this.showForm=!0},confirmCreate:function(){var t=this;n.saveOrUpdate(Object(l["a"])({},this.form)).then((function(){t.$notify({title:"成功",message:"操作完成",type:"success"}),t.showForm=!1,t.getList()}))},getList:function(){var t=this,e={pageNo:this.pageNo,pageSize:this.pageSize};n.queryList(e).then((function(e){t.list=e.data.items,t.totalCount=e.data.totalCount}))},handleSizeChange:function(t){this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.pageNo=t,this.getList()}}},c=r,u=(a("b63e"),a("2877")),m=Object(u["a"])(c,s,o,!1,null,"0b75a540",null);e["default"]=m.exports},b63e:function(t,e,a){"use strict";var s=a("414c"),o=a.n(s);o.a}}]);